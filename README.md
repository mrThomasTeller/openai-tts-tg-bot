# OpenAI TTS Telegram Bot

Телеграм бот, который преобразует текстовые сообщения в аудио с помощью OpenAI TTS API.

## Возможности

- Преобразование текста в речь с помощью OpenAI TTS API
- Поддержка различных голосов (alloy, echo, fable, onyx, nova, shimmer)
- Разделение длинных текстов на части и отправка нескольких аудио сообщений
- Ограничение доступа к боту по списку разрешенных пользователей
- Контейнеризация с помощью Docker

## Требования

- Node.js 18+ (или Docker)
- Bun (пакетный менеджер)
- Telegram Bot Token (получить можно у [@BotFather](https://t.me/BotFather))
- OpenAI API Key (получить можно на [сайте OpenAI](https://platform.openai.com/api-keys))

## Установка и запуск

### Запуск с помощью Docker Compose (рекомендуется)

1. Клонируйте репозиторий:

```
git clone <url-репозитория>
cd openai-tts-tg-bot
```

2. Создайте файл `.env` на основе `.env.example`:

```
cp .env.example .env
```

3. Отредактируйте файл `.env`, добавив ваш Telegram Bot Token, OpenAI API Key и список разрешенных пользователей.

4. Запустите с помощью Docker Compose:

```
docker-compose up -d
```

### Локальный запуск с помощью Bun

1. Клонируйте репозиторий:

```
git clone <url-репозитория>
cd openai-tts-tg-bot
```

2. Установите зависимости:

```
bun install
```

3. Создайте файл `.env` на основе `.env.example`:

```
cp .env.example .env
```

4. Отредактируйте файл `.env`, добавив ваш Telegram Bot Token, OpenAI API Key и список разрешенных пользователей.

5. Запустите бота:

```
bun start
```

Для разработки с автоматической перезагрузкой при изменении файлов:

```
bun dev
```

## Использование

1. Начните диалог с ботом, отправив команду `/start`
2. Отправьте боту текстовое сообщение
3. Бот преобразует текст в речь и отправит аудио сообщение
4. Для изменения голоса используйте команду `/voice [название_голоса]`

## Конфигурация

Конфигурация бота осуществляется через переменные окружения в файле `.env`:

- `TELEGRAM_BOT_TOKEN` - токен Telegram бота
- `OPENAI_API_KEY` - ключ API OpenAI
- `ALLOWED_USERS` - список разрешенных пользователей (ID или @username через запятую)
- `TTS_MODEL` - модель TTS (по умолчанию: tts-1)
- `TTS_VOICE` - голос по умолчанию (по умолчанию: alloy)
- `MAX_TEXT_LENGTH` - максимальная длина текста для одного запроса TTS (по умолчанию: 4096)

## Лицензия

MIT
